names_to = "Date",
values_to = "Exports") %>%
# Convert to proper date format
mutate(Date = as.Date(Date)) %>%
# Filter for EAC countries
filter(Country %in% eac_countries) %>%
# Convert exports to numeric (handle any non-numeric values)
mutate(Exports = as.numeric(Exports)) %>%
# Extract year for aggregation
mutate(Year = format(Date, "%Y")) %>%
# Remove any residual non-EAC countries that might have matched
filter(!is.na(Exports))
library(janitor)
df_clean <- df |>  clean_names()
View(df_clean)
# Read the data (adjust path accordingly)
df <- read_excel("./data/Direction-of-Trade_Exports.xlsx",
sheet = "Annual_CY",
skip = 5)  # Skip metadata rows
df_clean <- df |>  clean_names()
library(readxl)
library(tidyverse)
library(janitor)
# Define EAC member countries (verify exact names in your data)
eac_countries <- c("Kenya", "Tanzania", "Rwanda", "Burundi",
"South Sudan", "DRC")
# Read annual data --------------------------------------------------------
df_annual <- read_excel("./data/Direction-of-Trade_Exports.xlsx",
sheet = "Annual_CY",
skip = 5) %>%  # Adjust skip based on actual header rows
rename(Country = 1) %>%
filter(!is.na(Country)) %>%
# Convert to tidy format
pivot_longer(cols = -Country,
names_to = "Year",
values_to = "Exports") %>%
# Clean year column and convert exports to numeric
mutate(Year = as.numeric(gsub("\\D", "", Year)),  # Extract numeric year
Exports = as.numeric(Exports)) %>%
filter(!is.na(Exports))
View(df_annual)
# Filter for EAC countries only
eac_annual <- df_annual %>%
filter(Country %in% eac_countries)
View(eac_annual)
# 1. Total EAC exports trend
total_trend <- eac_annual %>%
group_by(Year) %>%
summarise(Total = sum(Exports, na.rm = TRUE))
View(total_trend)
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_minimal()
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_economist()
library(ggthemes)
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_economist()
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_wsj()
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_fivethirtyeight()
# 2. Country breakdown (latest year)
latest_year <- max(eac_annual$Year)
country_breakdown <- eac_annual %>%
filter(Year == latest_year) %>%
mutate(Share = Exports/sum(Exports))
View(country_breakdown)
ggplot(country_breakdown, aes(x = reorder(Country, Exports), y = Exports)) +
geom_col(fill = "#2c7bb6", width = 0.8) +
geom_text(aes(label = scales::percent(Share, accuracy = 1)),
hjust = -0.1, size = 3.5) +
coord_flip() +
labs(title = paste("EAC Export Distribution", latest_year),
subtitle = "Percentage share of total EAC exports",
y = "Exports (US$ Millions)",
x = "") +
theme_minimal()
ggplot(country_breakdown, aes(x = reorder(Country, Exports), y = Exports)) +
geom_col(fill = "#2c7bb6", width = 0.8) +
geom_text(aes(label = scales::percent(Share, accuracy = 1)),
hjust = -0.1, size = 3.5) +
coord_flip() +
labs(title = paste("EAC Export Distribution", latest_year),
subtitle = "Percentage share of total EAC exports",
y = "Exports (US$ Millions)",
x = "") +
theme_economist()
# 3. Country-specific trends
ggplot(eac_annual, aes(x = Year, y = Exports, color = Country)) +
geom_line(linewidth = 1) +
geom_point(size = 2) +
labs(title = "Export Trends to Individual EAC Countries",
y = "Exports (US$ Millions)",
x = "") +
scale_color_brewer(palette = "Set1") +
theme_minimal() +
theme(legend.position = "bottom")
# 4. Export composition table (latest 3 years)
eac_annual %>%
filter(Year >= max(Year) - 2) %>%
pivot_wider(names_from = Year, values_from = Exports) %>%
arrange(desc(.[[3]])) %>%  # Sort by latest year
mutate(across(where(is.numeric), ~ round(., 1)))
unique(df_annual$Country)
?rename
df_annual_v2 <- df_annual %>%
mutate(Country = recode(Country,
'BURUNDI' = 'Burundi',
'DR CONGO' = 'DRC',
'KENYA' =  'Kenya',
'RWANDA' =  'Rwanda',
'SOUTH SUDAN' =  'South Sudan',
'TANZANIA' =  'Tanzania' ))
View(df_annual_v2)
unique(df_annual_v2$Country)
# Filter for EAC countries only
eac_annual <- df_annual_v2 %>%
filter(Country %in% eac_countries)
# 1. Total EAC exports trend
total_trend <- eac_annual %>%
group_by(Year) %>%
summarise(Total = sum(Exports, na.rm = TRUE))
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_fivethirtyeight()
# 2. Country breakdown (latest year)
latest_year <- max(eac_annual$Year)
country_breakdown <- eac_annual %>%
filter(Year == latest_year) %>%
mutate(Share = Exports/sum(Exports))
ggplot(country_breakdown, aes(x = reorder(Country, Exports), y = Exports)) +
geom_col(fill = "#2c7bb6", width = 0.8) +
geom_text(aes(label = scales::percent(Share, accuracy = 1)),
hjust = -0.1, size = 3.5) +
coord_flip() +
labs(title = paste("EAC Export Distribution", latest_year),
subtitle = "Percentage share of total EAC exports",
y = "Exports (US$ Millions)",
x = "") +
theme_economist()
View(total_trend)
View(eac_annual)
View(total_trend)
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_fivethirtyeight()
country_breakdown <- eac_annual %>%
filter(Year == latest_year) %>%
mutate(Share = Exports/sum(Exports))
df_annual_v2 <- df_annual %>%
mutate(Country = recode(Country,
'Burundi' = 'BURUNDI',
'DRC' = 'DR CONGO' ,
'Kenya' = 'KENYA',
'Rwanda' = 'RWANDA',
'South Sudan' = 'SOUTH SUDAN',
'Tanzania' = 'TANZANIA'   ))
View(df_annual_v2)
# Define EAC member countries (verify exact names in your data)
eac_countries <- c("KENYA", "TANZANIA", "RWANDA", "BURUNDI",
"SOUTH SUDAN", "DR CONGO")
# Read annual data --------------------------------------------------------
df_annual <- read_excel("./data/Direction-of-Trade_Exports.xlsx",
sheet = "Annual_CY",
skip = 5) %>%  # Adjust skip based on actual header rows
rename(Country = 1) %>%
filter(!is.na(Country)) %>%
# Convert to tidy format
pivot_longer(cols = -Country,
names_to = "Year",
values_to = "Exports") %>%
# Clean year column and convert exports to numeric
mutate(Year = as.numeric(gsub("\\D", "", Year)),  # Extract numeric year
Exports = as.numeric(Exports)) %>%
filter(!is.na(Exports))
df_annual_v2 <- df_annual %>%
mutate(Country = recode(Country,
'Burundi' = 'BURUNDI',
'DRC' = 'DR CONGO' ,
'Kenya' = 'KENYA',
'Rwanda' = 'RWANDA',
'South Sudan' = 'SOUTH SUDAN',
'Tanzania' = 'TANZANIA'   ))
# Filter for EAC countries only
eac_annual <- df_annual_v2 %>%
filter(Country %in% eac_countries)
# 1. Total EAC exports trend
total_trend <- eac_annual %>%
group_by(Year) %>%
summarise(Total = sum(Exports, na.rm = TRUE))
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_fivethirtyeight()
# 2. Country breakdown (latest year)
latest_year <- max(eac_annual$Year)
country_breakdown <- eac_annual %>%
filter(Year == latest_year) %>%
mutate(Share = Exports/sum(Exports))
ggplot(country_breakdown, aes(x = reorder(Country, Exports), y = Exports)) +
geom_col(fill = "#2c7bb6", width = 0.8) +
geom_text(aes(label = scales::percent(Share, accuracy = 1)),
hjust = -0.1, size = 3.5) +
coord_flip() +
labs(title = paste("EAC Export Distribution", latest_year),
subtitle = "Percentage share of total EAC exports",
y = "Exports (US$ Millions)",
x = "") +
theme_economist()
# 3. Country-specific trends
ggplot(eac_annual, aes(x = Year, y = Exports, color = Country)) +
geom_line(linewidth = 1) +
geom_point(size = 2) +
labs(title = "Export Trends to Individual EAC Countries",
y = "Exports (US$ Millions)",
x = "") +
scale_color_brewer(palette = "Set1") +
theme_minimal() +
theme(legend.position = "bottom")
# 4. Export composition table (latest 3 years)
eac_annual %>%
filter(Year >= max(Year) - 2) %>%
pivot_wider(names_from = Year, values_from = Exports) %>%
arrange(desc(.[[3]])) %>%  # Sort by latest year
mutate(across(where(is.numeric), ~ round(., 1)))
library(stringr)
# Read annual data --------------------------------------------------------
df_annual <- read_excel("./data/Direction-of-Trade_Exports.xlsx",
sheet = "Annual_CY",
skip = 5) %>%  # Adjust skip based on actual header rows
rename(Country = 1) %>%
filter(!is.na(Country)) %>%
# Convert to tidy format
pivot_longer(cols = -Country,
names_to = "Year",
values_to = "Exports") %>%
# Clean year column and convert exports to numeric
mutate(Year = as.numeric(gsub("\\D", "", Year)),  # Extract numeric year
Exports = as.numeric(Exports)) %>%
filter(!is.na(Exports))
df_annual_clean <- apply(df_annual, str_remove_all, " ")
df_annual_clean <- sapply(df_annual, str_remove_all, " ")
View(df_annual_clean)
# Define EAC member countries (verify exact names in your data)
eac_countries <- c("Kenya", "Tanzania", "Rwanda", "Burundi",
"SouthSudan", "DRC")
# Read annual data --------------------------------------------------------
df_annual <- read_excel("./data/Direction-of-Trade_Exports.xlsx",
sheet = "Annual_CY",
skip = 5) %>%  # Adjust skip based on actual header rows
rename(Country = 1) %>%
filter(!is.na(Country)) %>%
# Convert to tidy format
pivot_longer(cols = -Country,
names_to = "Year",
values_to = "Exports") %>%
# Clean year column and convert exports to numeric
mutate(Year = as.numeric(gsub("\\D", "", Year)),  # Extract numeric year
Exports = as.numeric(Exports)) %>%
filter(!is.na(Exports))
df_annual_clean <- sapply(df_annual, str_remove_all, " ")
df_annual_v2 <- df_annual_clean %>%
mutate(Country = recode(Country,
'BURUNDI'= 'Burundi',
'DRCONGO'= 'DRC',
'KENYA' ='Kenya',
'RWANDA'= 'Rwanda',
'SOUTHSUDAN'= 'SouthSudan',
'TANZANIA'= 'Tanzania' ))
# Filter for EAC countries only
eac_annual <- df_annual_v2 %>%
filter(Country %in% eac_countries)
df_annual_clean <- apply(df_annual, str_remove_all, " ")
df_annual_clean <- apply(df_annual,1, str_remove_all, " ")
df_annual_v2 <- df_annual_clean %>%
mutate(Country = recode(Country,
'BURUNDI'= 'Burundi',
'DRCONGO'= 'DRC',
'KENYA' ='Kenya',
'RWANDA'= 'Rwanda',
'SOUTHSUDAN'= 'SouthSudan',
'TANZANIA'= 'Tanzania' ))
View(df_annual_clean)
df_annual_clean <- mutate_at(df_annual,trimws())
df_annual_clean <- mutate_at(df_annual,trimws)
df_annual_clean <- df_annual %>%
mutate(Partner = str_trim(Country))
View(df_annual_clean)
df_annual_clean <- df_annual %>%
mutate(Country = str_trim(Country))
View(df_annual_clean)
df_annual_v2 <- df_annual_clean %>%
mutate(Country = recode(Country,
'BURUNDI'= 'Burundi',
'DR CONGO'= 'DRC',
'KENYA' ='Kenya',
'RWANDA'= 'Rwanda',
'SOUTH SUDAN'= 'South Sudan',
'TANZANIA'= 'Tanzania' ))
# Filter for EAC countries only
eac_annual <- df_annual_v2 %>%
filter(Country %in% eac_countries)
View(eac_annual)
# 1. Total EAC exports trend
total_trend <- eac_annual %>%
group_by(Year) %>%
summarise(Total = sum(Exports, na.rm = TRUE))
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_fivethirtyeight()
# 2. Country breakdown (latest year)
latest_year <- max(eac_annual$Year)
country_breakdown <- eac_annual %>%
filter(Year == latest_year) %>%
mutate(Share = Exports/sum(Exports))
ggplot(country_breakdown, aes(x = reorder(Country, Exports), y = Exports)) +
geom_col(fill = "#2c7bb6", width = 0.8) +
geom_text(aes(label = scales::percent(Share, accuracy = 1)),
hjust = -0.1, size = 3.5) +
coord_flip() +
labs(title = paste("EAC Export Distribution", latest_year),
subtitle = "Percentage share of total EAC exports",
y = "Exports (US$ Millions)",
x = "") +
theme_economist()
# 3. Country-specific trends
ggplot(eac_annual, aes(x = Year, y = Exports, color = Country)) +
geom_line(linewidth = 1) +
geom_point(size = 2) +
labs(title = "Export Trends to Individual EAC Countries",
y = "Exports (US$ Millions)",
x = "") +
scale_color_brewer(palette = "Set1") +
theme_minimal() +
theme(legend.position = "bottom")
# 4. Export composition table (latest 3 years)
eac_annual %>%
filter(Year >= max(Year) - 2) %>%
pivot_wider(names_from = Year, values_from = Exports) %>%
arrange(desc(.[[3]])) %>%  # Sort by latest year
mutate(across(where(is.numeric), ~ round(., 1)))
# Filter for EAC countries only
eac_annual <- df_annual_clean %>%
filter(Country %in% eac_countries)
# 1. Total EAC exports trend
total_trend <- eac_annual %>%
group_by(Year) %>%
summarise(Total = sum(Exports, na.rm = TRUE))
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_fivethirtyeight()
# 2. Country breakdown (latest year)
latest_year <- max(eac_annual$Year)
country_breakdown <- eac_annual %>%
filter(Year == latest_year) %>%
mutate(Share = Exports/sum(Exports))
ggplot(country_breakdown, aes(x = reorder(Country, Exports), y = Exports)) +
geom_col(fill = "#2c7bb6", width = 0.8) +
geom_text(aes(label = scales::percent(Share, accuracy = 1)),
hjust = -0.1, size = 3.5) +
coord_flip() +
labs(title = paste("EAC Export Distribution", latest_year),
subtitle = "Percentage share of total EAC exports",
y = "Exports (US$ Millions)",
x = "") +
theme_economist()
# 3. Country-specific trends
ggplot(eac_annual, aes(x = Year, y = Exports, color = Country)) +
geom_line(linewidth = 1) +
geom_point(size = 2) +
labs(title = "Export Trends to Individual EAC Countries",
y = "Exports (US$ Millions)",
x = "") +
scale_color_brewer(palette = "Set1") +
theme_minimal() +
theme(legend.position = "bottom")
# 4. Export composition table (latest 3 years)
eac_annual %>%
filter(Year >= max(Year) - 2) %>%
pivot_wider(names_from = Year, values_from = Exports) %>%
arrange(desc(.[[3]])) %>%  # Sort by latest year
mutate(across(where(is.numeric), ~ round(., 1)))
# Define EAC member countries (verify exact names in your data)
eac_countries <- c("Kenya", "Tanzania", "Rwanda", "Burundi",
"South Sudan", "DRC")
# Read annual data --------------------------------------------------------
df_annual <- read_excel("./data/Direction-of-Trade_Exports.xlsx",
sheet = "Annual_CY",
skip = 5) %>%  # Adjust skip based on actual header rows
rename(Country = 1) %>%
filter(!is.na(Country)) %>%
# Convert to tidy format
pivot_longer(cols = -Country,
names_to = "Year",
values_to = "Exports") %>%
# Clean year column and convert exports to numeric
mutate(Year = as.numeric(gsub("\\D", "", Year)),  # Extract numeric year
Exports = as.numeric(Exports)) %>%
filter(!is.na(Exports))
df_annual_clean <- df_annual %>%
mutate(Country = str_trim(Country))
# Filter for EAC countries only
eac_annual <- df_annual_clean %>%
filter(Country %in% eac_countries)
# 1. Total EAC exports trend
total_trend <- eac_annual %>%
group_by(Year) %>%
summarise(Total = sum(Exports, na.rm = TRUE))
ggplot(total_trend, aes(x = Year, y = Total)) +
geom_line(color = "#2c7bb6", linewidth = 1) +
geom_point(color = "#2c7bb6", size = 2.5) +
labs(title = "Uganda's Total Exports to EAC Countries",
subtitle = "Annual Trend (Calendar Years)",
y = "Exports (US$ Millions)",
x = "") +
scale_x_continuous(breaks = seq(min(total_trend$Year), max(total_trend$Year), 2)) +
theme_fivethirtyeight()
# 2. Country breakdown (latest year)
latest_year <- max(eac_annual$Year)
country_breakdown <- eac_annual %>%
filter(Year == latest_year) %>%
mutate(Share = Exports/sum(Exports))
ggplot(country_breakdown, aes(x = reorder(Country, Exports), y = Exports)) +
geom_col(fill = "#2c7bb6", width = 0.8) +
geom_text(aes(label = scales::percent(Share, accuracy = 1)),
hjust = -0.1, size = 3.5) +
coord_flip() +
labs(title = paste("EAC Export Distribution", latest_year),
subtitle = "Percentage share of total EAC exports",
y = "Exports (US$ Millions)",
x = "") +
theme_economist()
# 3. Country-specific trends
ggplot(eac_annual, aes(x = Year, y = Exports, color = Country)) +
geom_line(linewidth = 1) +
geom_point(size = 2) +
labs(title = "Export Trends to Individual EAC Countries",
y = "Exports (US$ Millions)",
x = "") +
scale_color_brewer(palette = "Set1") +
theme_minimal() +
theme(legend.position = "bottom")
# 4. Export composition table (latest 3 years)
eac_annual %>%
filter(Year >= max(Year) - 2) %>%
pivot_wider(names_from = Year, values_from = Exports) %>%
arrange(desc(.[[3]])) %>%  # Sort by latest year
mutate(across(where(is.numeric), ~ round(., 1)))
